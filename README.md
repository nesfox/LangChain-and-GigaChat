# AI Agent,  LangChain and GigaChat


### Описание проекта
Этот проект представляет собой систему генерации актов выполненных работ и счетов на основе пользовательского ввода. Взаимодействие происходит через GigaChat, а итоговые документы формируются с использованием шаблонов на языке разметки Typst. Поддерживается генерация PDF-документов с подстановкой реквизитов и данных заказов.

### Структура проекта
```
LangChain-and-GigaChat/
│
├── attachments/                   # Папка для сохранения вложений из писем
│
├── typst/                         # Шаблоны и итоговые документы в формате Typst и PDF
│   ├── act.json                   # Данные для генерации акта
│   ├── act.pdf                    # Сгенерированный акт (PDF)
│   ├── act.typ                    # Шаблон Typst для акта
│   ├── invoice.json               # Данные для генерации счёта
│   ├── invoice.pdf                # Сгенерированный счёт (PDF)
│   ├── invoice.typ                # Шаблон Typst для счёта
│   ├── ru-numbers.typ            # Вспомогательный файл для прописи чисел словами
│
├── test_start_typst/             # Тестовый запуск генерации через Typst
│
├── .env                          # Переменные окружения (необходимо заполнить)
│
├── .gitignore                    # Файлы и папки, игнорируемые Git
│
├── act_generate.py               # Главный скрипт: диалог с агентом и генерация документа
├── app.py                        # Логика Streamlit-интерфейса (если используется)
├── agent_flow.png                # Иллюстрация архитектуры агента (граф вызовов)
│
├── mail.py                       # Загрузка писем и вложений с почты (через IMAP)
├── proba_typst.typ               # Пробный шаблон документа на языке Typst
│
├── py_project.toml               # Метаинформация проекта (если подключён Poetry)
├── README.md                     # Этот файл
├── requirements.txt              # Зависимости для установки в среду
```

Чтобы запустить проект необходимо сделать следующие шаги, склонироват данный репозиторий:
```
git clone https://github.com/Polina1305/LangChain-and-GigaChat.git
```
Активировать виртуальное окружение для Windows and MacOS
```powershell
python -m venv env
```

Активировать виртуальное окружение

```powershell (Windows)
env\Scripts\activate
```
```powershell (MacOS)
source env\bin\activate
```

Установите соответствующие библиотеки
```powershell
pip install -m requirements.py
```

Cоздайте файл .env и пропишите в него полученный токен для взаимодействия с моделью и остальные данные 

Пример содержания файла .env для запуска файла proba_gigachat.py

```
GIGACHAT_CREDENTIALS='MWR.....=='
OPENAI_API_KEY='l.......a'
EMAIL_LOGIN='smolyak-...@mail.ru'
EMAIL_PASSWORD='.....'
EMAIL_IMAP_HOST='imap.mail.ru'
EMAIL_IMAP_PORT=993
```

### Пример запуска генерации акта

```
python act_generate.py
```
Бот-агент задаст уточняющие вопросы (наименование услуги, сумма и т.д.) и сгенерирует PDF-документ.

### Как собрать PDF вручную

Если хочешь проверить шаблон вручную:
```
typst compile typst/act.typ typst/act.pdf
```

#### Актуальность проекта

- Репетитор хочет отправить клиенту акт на оказанные услуги.
- Компания формирует счета на ежемесячную аренду.
- Система автоматически подставляет данные из почтовых писем с реквизитами.

Автор проекта: Смоляк Полина Викторовна  
Контакты: [@Smolyak_DS](https://t.me/Smolyak_DS)